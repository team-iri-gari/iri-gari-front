<!DOCTYPE html>
<html>

<head>
    <style>
        #button {
            position: absolute;
            width: 100px;
            height: 50px;
            line-height: 50px;
            text-align: center;
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        .circle {
            display: flex;
            justify-content: center;
            align-items: center;

            color: aliceblue;

            position: absolute;
            border-radius: 50%;
            line-height: 40px;
            width: 80px;
            height: 80px;
        }

        #circle1 {
            background-color: #4CAF50;
        }

        #circle2 {
            background-color: aqua;
        }

        #circle3 {
            background-color: crimson;
        }

        #circle4 {
            background-color: bisque;
        }
    </style>
</head>

<body>
    <div class="circle" id="circle1"> 서울</div>
    <div class="circle" id="circle2"> 대전</div>
    <div class="circle" id="circle3"> 구미</div>
    <div class="circle" id="circle4"> 광주</div>

    <script src="https://cdn.jsdelivr.net/npm/matter-js@0.14.2"></script>
    <script>
        var Engine = Matter.Engine,
            Render = Matter.Render,
            World = Matter.World,
            Bodies = Matter.Bodies,
            Body = Matter.Body,
            Mouse = Matter.Mouse,
            MouseConstraint = Matter.MouseConstraint,
            Events = Matter.Events;

        var engine = Engine.create();
        var world = engine.world;
        world.gravity.y = 0;

        var render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false,
                background: 'transparent'
            }
        });

        var circle1 = Bodies.circle(80, 100, 40, { isStatic: false });
        var circle2 = Bodies.circle(230, 100, 40, { isStatic: false });
        var circle3 = Bodies.circle(380, 100, 40, { isStatic: false });
        var circle4 = Bodies.circle(400, 100, 40, { isStatic: false });

        circle1.isStatic = false;
        circle2.isStatic = false;
        circle3.isStatic = false;
        circle4.isStatic = false;

        World.add(world, [circle1, circle2, circle3, circle4]);

        Events.on(engine, 'beforeUpdate', function (event) {
            Matter.Composite.allBodies(world).forEach(function (body) {
                if (!body.isStatic) {
                    applyGravity(body);
                }
            });
        });

        function applyGravity(body) {
            var dx = (window.innerWidth / 2) - body.position.x;
            var dy = (window.innerHeight / 2) - body.position.y;
            var distance = Math.sqrt(dx * dx + dy * dy);
            var gravityConstant = 0.0001;

            var gravity = {
                x: (dx / distance) * gravityConstant * body.mass,
                y: (dy / distance) * gravityConstant * body.mass
            };

            Body.applyForce(body, body.position, gravity);
        }

        document.getElementById('circle1').addEventListener('mousedown', function (event) {
            console.log("!!!")
        });

        var mouse = Mouse.create(render.canvas),
            mouseConstraint = MouseConstraint.create(engine, {
                mouse: mouse,
                constraint: {
                    stiffness: 0.2,
                    render: {
                        visible: false
                    }
                }
            });

        World.add(world, mouseConstraint);

        (function run() {
            window.requestAnimationFrame(run);
            Engine.update(engine); // 엔진을 갱신합니다.

            var bodies = [circle1, circle2, circle3, circle4];
            bodies.forEach(function (body, index) {
                var element = document.getElementById('circle' + (index + 1));
                if (element) {
                    var x = body.position.x - 40;
                    var y = body.position.y - 40;
                    element.style.transform = 'translate(' + x + 'px, ' + y + 'px)';
                }
            });
        })();

        Engine.run(engine);
    </script>
</body>

</html>